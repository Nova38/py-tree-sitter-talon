input: |
  app: thunderbird
  and not app: thunderbird_contacts
  and not app: thunderbird_composer
  -
  # Set tags
  tag(): user.tabs

  # navigate tabs
  go (mails | messages | inbox): user.tab_jump(1)
  go (calendar | lightning): user.thunderbird_mod("shift-c")
  go tasks: user.thunderbird_mod("shift-d")
  # open windows
  (open address [book] | address book | open contacts): user.thunderbird_mod("shift-b")
  dev tools: user.thunderbird_mod("shift-i")
output:
  type: source_file
  children:
    - type: context
      children:
        - type: and
          children:
            - type: match
              children: []
              key:
                text: app
                type: identifier
              pattern:
                text: " thunderbird"
                type: implicit_string
            - type: and
              children:
                - type: not
                  children:
                    - type: match
                      children: []
                      key:
                        text: app
                        type: identifier
                      pattern:
                        text: " thunderbird_contacts"
                        type: implicit_string
                - type: not
                  children:
                    - type: match
                      children: []
                      key:
                        text: app
                        type: identifier
                      pattern:
                        text: " thunderbird_composer"
                        type: implicit_string
    - text: "# Set tags"
      type: comment
    - type: include_tag
      children: []
      tag:
        text: user.tabs
        type: identifier
    - text: "# navigate tabs"
      type: comment
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: seq
            children:
              - text: go
                type: word
              - type: parenthesized_rule
                children:
                  - type: choice
                    children:
                      - text: mails
                        type: word
                      - text: messages
                        type: word
                      - text: inbox
                        type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: action
              children: []
              action_name:
                text: user.tab_jump
                type: identifier
              arguments:
                type: argument_list
                children:
                  - text: "1"
                    type: integer
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: seq
            children:
              - text: go
                type: word
              - type: parenthesized_rule
                children:
                  - type: choice
                    children:
                      - text: calendar
                        type: word
                      - text: lightning
                        type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: action
              children: []
              action_name:
                text: user.thunderbird_mod
                type: identifier
              arguments:
                type: argument_list
                children:
                  - type: string
                    children:
                      - text: shift-c
                        type: string_content
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: seq
            children:
              - text: go
                type: word
              - text: tasks
                type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: action
              children: []
              action_name:
                text: user.thunderbird_mod
                type: identifier
              arguments:
                type: argument_list
                children:
                  - type: string
                    children:
                      - text: shift-d
                        type: string_content
    - text: "# open windows"
      type: comment
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: parenthesized_rule
            children:
              - type: choice
                children:
                  - type: seq
                    children:
                      - text: open
                        type: word
                      - text: address
                        type: word
                      - type: optional
                        children:
                          - text: book
                            type: word
                  - type: seq
                    children:
                      - text: address
                        type: word
                      - text: book
                        type: word
                  - type: seq
                    children:
                      - text: open
                        type: word
                      - text: contacts
                        type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: action
              children: []
              action_name:
                text: user.thunderbird_mod
                type: identifier
              arguments:
                type: argument_list
                children:
                  - type: string
                    children:
                      - text: shift-b
                        type: string_content
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: seq
            children:
              - text: dev
                type: word
              - text: tools
                type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: action
              children: []
              action_name:
                text: user.thunderbird_mod
                type: identifier
              arguments:
                type: argument_list
                children:
                  - type: string
                    children:
                      - text: shift-i
                        type: string_content
