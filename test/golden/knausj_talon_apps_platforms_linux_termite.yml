input: |
  app: termite
  and not win.title: /VIM/
  -
  #comment or remove tags for command sets you don't want
  #termite doesn't support the file_manager stuff yet
  #tag(): user.file_manager
  tag(): user.kubectl
  tag(): user.git
  tag(): user.taskwarrior
  tag(): terminal

  # Selection mode
  shell yank: key("y")
  shell select: key("ctrl-shift-space")
  shell insert: key("escape")
  visual line: key("v")
  visual line mode: key("V")
output:
  type: source_file
  children:
    - type: context
      children:
        - type: and
          children:
            - type: match
              children: []
              key:
                text: app
                type: identifier
              pattern:
                text: " termite"
                type: implicit_string
            - type: not
              children:
                - type: match
                  children: []
                  key:
                    text: win.title
                    type: identifier
                  pattern:
                    text: " /VIM/"
                    type: implicit_string
    - text: "#comment or remove tags for command sets you don't want"
      type: comment
    - text: "#termite doesn't support the file_manager stuff yet"
      type: comment
    - text: "#tag(): user.file_manager"
      type: comment
    - type: include_tag
      children: []
      tag:
        text: user.kubectl
        type: identifier
    - type: include_tag
      children: []
      tag:
        text: user.git
        type: identifier
    - type: include_tag
      children: []
      tag:
        text: user.taskwarrior
        type: identifier
    - type: include_tag
      children: []
      tag:
        text: terminal
        type: identifier
    - text: "# Selection mode"
      type: comment
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: seq
            children:
              - text: shell
                type: word
              - text: yank
                type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: key_action
              children: []
              arguments:
                text: '"y"'
                type: implicit_string
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: seq
            children:
              - text: shell
                type: word
              - text: select
                type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: key_action
              children: []
              arguments:
                text: '"ctrl-shift-space"'
                type: implicit_string
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: seq
            children:
              - text: shell
                type: word
              - text: insert
                type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: key_action
              children: []
              arguments:
                text: '"escape"'
                type: implicit_string
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: seq
            children:
              - text: visual
                type: word
              - text: line
                type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: key_action
              children: []
              arguments:
                text: '"v"'
                type: implicit_string
    - type: command
      children: []
      rule:
        type: rule
        children:
          - type: seq
            children:
              - text: visual
                type: word
              - text: line
                type: word
              - text: mode
                type: word
      script:
        type: block
        children:
          - type: expression
            children: []
            expression:
              type: key_action
              children: []
              arguments:
                text: '"V"'
                type: implicit_string
