input: |
  open {user.website}: user.open_url(website)
  {user.search_engine} hunt <user.text>$: user.search_with_search_engine(search_engine, user.text)
  {user.search_engine} (that|this):
      text = edit.selected_text()
      user.search_with_search_engine(search_engine, text)
output:
  children:
  - children: []
    type: context
  - children:
    - children:
      - children:
        - text: open
          type: word
        - children:
          - text: user.website
            type: identifier
          list_name:
            text: user.website
            type: identifier
          type: list
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.open_url
            type: identifier
          arguments:
            children:
            - children:
              - text: website
                type: identifier
              type: variable
              variable_name:
                text: website
                type: identifier
            type: argument_list
          children:
          - text: user.open_url
            type: identifier
          - children:
            - children:
              - text: website
                type: identifier
              type: variable
              variable_name:
                text: website
                type: identifier
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.open_url
            type: identifier
          arguments:
            children:
            - children:
              - text: website
                type: identifier
              type: variable
              variable_name:
                text: website
                type: identifier
            type: argument_list
          children:
          - text: user.open_url
            type: identifier
          - children:
            - children:
              - text: website
                type: identifier
              type: variable
              variable_name:
                text: website
                type: identifier
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: open
          type: word
        - children:
          - text: user.website
            type: identifier
          list_name:
            text: user.website
            type: identifier
          type: list
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.open_url
            type: identifier
          arguments:
            children:
            - children:
              - text: website
                type: identifier
              type: variable
              variable_name:
                text: website
                type: identifier
            type: argument_list
          children:
          - text: user.open_url
            type: identifier
          - children:
            - children:
              - text: website
                type: identifier
              type: variable
              variable_name:
                text: website
                type: identifier
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.open_url
            type: identifier
          arguments:
            children:
            - children:
              - text: website
                type: identifier
              type: variable
              variable_name:
                text: website
                type: identifier
            type: argument_list
          children:
          - text: user.open_url
            type: identifier
          - children:
            - children:
              - text: website
                type: identifier
              type: variable
              variable_name:
                text: website
                type: identifier
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - children:
          - text: user.search_engine
            type: identifier
          list_name:
            text: user.search_engine
            type: identifier
          type: list
        - text: hunt
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      - text: $
        type: end_anchor
      type: rule
    - children:
      - children:
        - action_name:
            text: user.search_with_search_engine
            type: identifier
          arguments:
            children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: user.text
                type: identifier
              type: variable
              variable_name:
                text: user.text
                type: identifier
            type: argument_list
          children:
          - text: user.search_with_search_engine
            type: identifier
          - children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: user.text
                type: identifier
              type: variable
              variable_name:
                text: user.text
                type: identifier
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.search_with_search_engine
            type: identifier
          arguments:
            children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: user.text
                type: identifier
              type: variable
              variable_name:
                text: user.text
                type: identifier
            type: argument_list
          children:
          - text: user.search_with_search_engine
            type: identifier
          - children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: user.text
                type: identifier
              type: variable
              variable_name:
                text: user.text
                type: identifier
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - children:
          - text: user.search_engine
            type: identifier
          list_name:
            text: user.search_engine
            type: identifier
          type: list
        - text: hunt
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      - text: $
        type: end_anchor
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.search_with_search_engine
            type: identifier
          arguments:
            children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: user.text
                type: identifier
              type: variable
              variable_name:
                text: user.text
                type: identifier
            type: argument_list
          children:
          - text: user.search_with_search_engine
            type: identifier
          - children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: user.text
                type: identifier
              type: variable
              variable_name:
                text: user.text
                type: identifier
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.search_with_search_engine
            type: identifier
          arguments:
            children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: user.text
                type: identifier
              type: variable
              variable_name:
                text: user.text
                type: identifier
            type: argument_list
          children:
          - text: user.search_with_search_engine
            type: identifier
          - children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: user.text
                type: identifier
              type: variable
              variable_name:
                text: user.text
                type: identifier
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - children:
          - text: user.search_engine
            type: identifier
          list_name:
            text: user.search_engine
            type: identifier
          type: list
        - children:
          - children:
            - text: that
              type: word
            - text: this
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    - children:
      - children:
        - text: text
          type: identifier
        - action_name:
            text: edit.selected_text
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: edit.selected_text
            type: identifier
          - children: []
            type: argument_list
          type: action
        left:
          text: text
          type: identifier
        right:
          action_name:
            text: edit.selected_text
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: edit.selected_text
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: assignment
      - children:
        - action_name:
            text: user.search_with_search_engine
            type: identifier
          arguments:
            children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: text
                type: identifier
              type: variable
              variable_name:
                text: text
                type: identifier
            type: argument_list
          children:
          - text: user.search_with_search_engine
            type: identifier
          - children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: text
                type: identifier
              type: variable
              variable_name:
                text: text
                type: identifier
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.search_with_search_engine
            type: identifier
          arguments:
            children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: text
                type: identifier
              type: variable
              variable_name:
                text: text
                type: identifier
            type: argument_list
          children:
          - text: user.search_with_search_engine
            type: identifier
          - children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: text
                type: identifier
              type: variable
              variable_name:
                text: text
                type: identifier
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - children:
          - text: user.search_engine
            type: identifier
          list_name:
            text: user.search_engine
            type: identifier
          type: list
        - children:
          - children:
            - text: that
              type: word
            - text: this
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    script:
      children:
      - children:
        - text: text
          type: identifier
        - action_name:
            text: edit.selected_text
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: edit.selected_text
            type: identifier
          - children: []
            type: argument_list
          type: action
        left:
          text: text
          type: identifier
        right:
          action_name:
            text: edit.selected_text
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: edit.selected_text
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: assignment
      - children:
        - action_name:
            text: user.search_with_search_engine
            type: identifier
          arguments:
            children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: text
                type: identifier
              type: variable
              variable_name:
                text: text
                type: identifier
            type: argument_list
          children:
          - text: user.search_with_search_engine
            type: identifier
          - children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: text
                type: identifier
              type: variable
              variable_name:
                text: text
                type: identifier
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.search_with_search_engine
            type: identifier
          arguments:
            children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: text
                type: identifier
              type: variable
              variable_name:
                text: text
                type: identifier
            type: argument_list
          children:
          - text: user.search_with_search_engine
            type: identifier
          - children:
            - children:
              - text: search_engine
                type: identifier
              type: variable
              variable_name:
                text: search_engine
                type: identifier
            - children:
              - text: text
                type: identifier
              type: variable
              variable_name:
                text: text
                type: identifier
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  type: source_file
