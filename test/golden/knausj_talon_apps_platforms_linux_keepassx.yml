input: |
  app: keepass
  -
  # Database
  open database: key(ctrl-o)
  save database: key(ctrl-s)
  close database: key(ctrl-w)
  lock database: key(ctrl-l)
  quit: key(ctrl-q)

  # Entries
  [add] new entry: key(ctrl-n)
  clone entry: key(ctrl-k)
  (view|edit) entry: key(ctrl-e)
  delete entry: key(ctrl-d)
  copy user [name]: key(ctrl-b)
  copy password: key(ctrl-c)
  open (earl|url|link): key(ctrl-u)
  copy (earl|url|link): key(ctrl-alt-u)
  find: key(ctrl-f)
  find <user.text>:
      key(ctrl-f)
      insert("{text}")
output:
  children:
  - children:
    - children:
      - text: app
        type: identifier
      - text: ' keepass'
        type: implicit_string
      key:
        text: app
        type: identifier
      pattern:
        text: ' keepass'
        type: implicit_string
      type: match
    type: context
  - text: '# Database'
    type: comment
  - children:
    - children:
      - children:
        - text: open
          type: word
        - text: database
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-o
            type: implicit_string
          children:
          - text: ctrl-o
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-o
            type: implicit_string
          children:
          - text: ctrl-o
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: open
          type: word
        - text: database
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-o
            type: implicit_string
          children:
          - text: ctrl-o
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-o
            type: implicit_string
          children:
          - text: ctrl-o
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: save
          type: word
        - text: database
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-s
            type: implicit_string
          children:
          - text: ctrl-s
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-s
            type: implicit_string
          children:
          - text: ctrl-s
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: save
          type: word
        - text: database
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-s
            type: implicit_string
          children:
          - text: ctrl-s
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-s
            type: implicit_string
          children:
          - text: ctrl-s
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: close
          type: word
        - text: database
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-w
            type: implicit_string
          children:
          - text: ctrl-w
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-w
            type: implicit_string
          children:
          - text: ctrl-w
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: close
          type: word
        - text: database
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-w
            type: implicit_string
          children:
          - text: ctrl-w
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-w
            type: implicit_string
          children:
          - text: ctrl-w
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: lock
          type: word
        - text: database
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-l
            type: implicit_string
          children:
          - text: ctrl-l
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-l
            type: implicit_string
          children:
          - text: ctrl-l
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: lock
          type: word
        - text: database
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-l
            type: implicit_string
          children:
          - text: ctrl-l
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-l
            type: implicit_string
          children:
          - text: ctrl-l
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - text: quit
        type: word
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-q
            type: implicit_string
          children:
          - text: ctrl-q
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-q
            type: implicit_string
          children:
          - text: ctrl-q
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - text: quit
        type: word
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-q
            type: implicit_string
          children:
          - text: ctrl-q
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-q
            type: implicit_string
          children:
          - text: ctrl-q
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - text: '# Entries'
    type: comment
  - children:
    - children:
      - children:
        - children:
          - text: add
            type: word
          type: optional
        - text: new
          type: word
        - text: entry
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-n
            type: implicit_string
          children:
          - text: ctrl-n
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-n
            type: implicit_string
          children:
          - text: ctrl-n
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - children:
          - text: add
            type: word
          type: optional
        - text: new
          type: word
        - text: entry
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-n
            type: implicit_string
          children:
          - text: ctrl-n
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-n
            type: implicit_string
          children:
          - text: ctrl-n
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: clone
          type: word
        - text: entry
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-k
            type: implicit_string
          children:
          - text: ctrl-k
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-k
            type: implicit_string
          children:
          - text: ctrl-k
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: clone
          type: word
        - text: entry
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-k
            type: implicit_string
          children:
          - text: ctrl-k
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-k
            type: implicit_string
          children:
          - text: ctrl-k
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - children:
          - children:
            - text: view
              type: word
            - text: edit
              type: word
            type: choice
          type: parenthesized_rule
        - text: entry
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-e
            type: implicit_string
          children:
          - text: ctrl-e
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-e
            type: implicit_string
          children:
          - text: ctrl-e
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - children:
          - children:
            - text: view
              type: word
            - text: edit
              type: word
            type: choice
          type: parenthesized_rule
        - text: entry
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-e
            type: implicit_string
          children:
          - text: ctrl-e
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-e
            type: implicit_string
          children:
          - text: ctrl-e
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: delete
          type: word
        - text: entry
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-d
            type: implicit_string
          children:
          - text: ctrl-d
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-d
            type: implicit_string
          children:
          - text: ctrl-d
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: delete
          type: word
        - text: entry
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-d
            type: implicit_string
          children:
          - text: ctrl-d
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-d
            type: implicit_string
          children:
          - text: ctrl-d
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: copy
          type: word
        - text: user
          type: word
        - children:
          - text: name
            type: word
          type: optional
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-b
            type: implicit_string
          children:
          - text: ctrl-b
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-b
            type: implicit_string
          children:
          - text: ctrl-b
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: copy
          type: word
        - text: user
          type: word
        - children:
          - text: name
            type: word
          type: optional
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-b
            type: implicit_string
          children:
          - text: ctrl-b
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-b
            type: implicit_string
          children:
          - text: ctrl-b
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: copy
          type: word
        - text: password
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-c
            type: implicit_string
          children:
          - text: ctrl-c
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-c
            type: implicit_string
          children:
          - text: ctrl-c
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: copy
          type: word
        - text: password
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-c
            type: implicit_string
          children:
          - text: ctrl-c
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-c
            type: implicit_string
          children:
          - text: ctrl-c
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: open
          type: word
        - children:
          - children:
            - text: earl
              type: word
            - text: url
              type: word
            - text: link
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-u
            type: implicit_string
          children:
          - text: ctrl-u
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-u
            type: implicit_string
          children:
          - text: ctrl-u
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: open
          type: word
        - children:
          - children:
            - text: earl
              type: word
            - text: url
              type: word
            - text: link
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-u
            type: implicit_string
          children:
          - text: ctrl-u
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-u
            type: implicit_string
          children:
          - text: ctrl-u
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: copy
          type: word
        - children:
          - children:
            - text: earl
              type: word
            - text: url
              type: word
            - text: link
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-alt-u
            type: implicit_string
          children:
          - text: ctrl-alt-u
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-alt-u
            type: implicit_string
          children:
          - text: ctrl-alt-u
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: copy
          type: word
        - children:
          - children:
            - text: earl
              type: word
            - text: url
              type: word
            - text: link
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-alt-u
            type: implicit_string
          children:
          - text: ctrl-alt-u
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-alt-u
            type: implicit_string
          children:
          - text: ctrl-alt-u
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - text: find
        type: word
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-f
            type: implicit_string
          children:
          - text: ctrl-f
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-f
            type: implicit_string
          children:
          - text: ctrl-f
            type: implicit_string
          type: key_action
        type: expression
      type: block
    rule:
      children:
      - text: find
        type: word
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-f
            type: implicit_string
          children:
          - text: ctrl-f
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-f
            type: implicit_string
          children:
          - text: ctrl-f
            type: implicit_string
          type: key_action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: find
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      type: rule
    - children:
      - children:
        - arguments:
            text: ctrl-f
            type: implicit_string
          children:
          - text: ctrl-f
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-f
            type: implicit_string
          children:
          - text: ctrl-f
            type: implicit_string
          type: key_action
        type: expression
      - children:
        - action_name:
            text: insert
            type: identifier
          arguments:
            children:
            - children:
              - text: '{'
                type: string_content
              - text: text
                type: string_content
              - text: '}'
                type: string_content
              type: string
            type: argument_list
          children:
          - text: insert
            type: identifier
          - children:
            - children:
              - text: '{'
                type: string_content
              - text: text
                type: string_content
              - text: '}'
                type: string_content
              type: string
            type: argument_list
          type: action
        expression:
          action_name:
            text: insert
            type: identifier
          arguments:
            children:
            - children:
              - text: '{'
                type: string_content
              - text: text
                type: string_content
              - text: '}'
                type: string_content
              type: string
            type: argument_list
          children:
          - text: insert
            type: identifier
          - children:
            - children:
              - text: '{'
                type: string_content
              - text: text
                type: string_content
              - text: '}'
                type: string_content
              type: string
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: find
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      type: rule
    script:
      children:
      - children:
        - arguments:
            text: ctrl-f
            type: implicit_string
          children:
          - text: ctrl-f
            type: implicit_string
          type: key_action
        expression:
          arguments:
            text: ctrl-f
            type: implicit_string
          children:
          - text: ctrl-f
            type: implicit_string
          type: key_action
        type: expression
      - children:
        - action_name:
            text: insert
            type: identifier
          arguments:
            children:
            - children:
              - text: '{'
                type: string_content
              - text: text
                type: string_content
              - text: '}'
                type: string_content
              type: string
            type: argument_list
          children:
          - text: insert
            type: identifier
          - children:
            - children:
              - text: '{'
                type: string_content
              - text: text
                type: string_content
              - text: '}'
                type: string_content
              type: string
            type: argument_list
          type: action
        expression:
          action_name:
            text: insert
            type: identifier
          arguments:
            children:
            - children:
              - text: '{'
                type: string_content
              - text: text
                type: string_content
              - text: '}'
                type: string_content
              type: string
            type: argument_list
          children:
          - text: insert
            type: identifier
          - children:
            - children:
              - text: '{'
                type: string_content
              - text: text
                type: string_content
              - text: '}'
                type: string_content
              type: string
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  type: source_file
