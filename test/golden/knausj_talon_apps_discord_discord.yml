input: |
  app: discord
  -
  tag(): user.messaging
  tag(): user.emoji

  # Navigation: Channels
  [channel] mentions last: user.discord_mentions_last()
  [channel] mentions next: user.discord_mentions_next()
  oldest unread: user.discord_oldest_unread()

  # UI
  toggle pins: user.discord_toggle_pins()
  toggle inbox: user.discord_toggle_inbox()
  toggle (members | member list): user.discord_toggle_members()
  pick emoji: user.discord_emoji_picker()
  pick (jif | gif | gift): user.discord_gif_picker()

  # Misc
  mark inbox channel read: user.discord_mark_inbox_read()
  [toggle] (mute | unmute): user.discord_mute()
  [toggle] (deafen | undeafen): user.discord_deafen()
  answer call: user.discord_answer_call()
  decline call: user.discord_decline_call()
output:
  children:
  - children:
    - children:
      - text: app
        type: identifier
      - text: ' discord'
        type: implicit_string
      key:
        text: app
        type: identifier
      pattern:
        text: ' discord'
        type: implicit_string
      type: match
    type: context
  - children:
    - text: user.messaging
      type: identifier
    tag:
      text: user.messaging
      type: identifier
    type: include_tag
  - children:
    - text: user.emoji
      type: identifier
    tag:
      text: user.emoji
      type: identifier
    type: include_tag
  - text: '# Navigation: Channels'
    type: comment
  - children:
    - children:
      - children:
        - children:
          - text: channel
            type: word
          type: optional
        - text: mentions
          type: word
        - text: last
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_mentions_last
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mentions_last
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_mentions_last
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mentions_last
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - children:
          - text: channel
            type: word
          type: optional
        - text: mentions
          type: word
        - text: last
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_mentions_last
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mentions_last
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_mentions_last
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mentions_last
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - children:
          - text: channel
            type: word
          type: optional
        - text: mentions
          type: word
        - text: next
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_mentions_next
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mentions_next
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_mentions_next
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mentions_next
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - children:
          - text: channel
            type: word
          type: optional
        - text: mentions
          type: word
        - text: next
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_mentions_next
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mentions_next
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_mentions_next
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mentions_next
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: oldest
          type: word
        - text: unread
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_oldest_unread
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_oldest_unread
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_oldest_unread
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_oldest_unread
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: oldest
          type: word
        - text: unread
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_oldest_unread
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_oldest_unread
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_oldest_unread
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_oldest_unread
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - text: '# UI'
    type: comment
  - children:
    - children:
      - children:
        - text: toggle
          type: word
        - text: pins
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_toggle_pins
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_pins
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_toggle_pins
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_pins
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: toggle
          type: word
        - text: pins
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_toggle_pins
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_pins
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_toggle_pins
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_pins
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: toggle
          type: word
        - text: inbox
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_toggle_inbox
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_inbox
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_toggle_inbox
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_inbox
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: toggle
          type: word
        - text: inbox
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_toggle_inbox
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_inbox
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_toggle_inbox
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_inbox
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: toggle
          type: word
        - children:
          - children:
            - text: members
              type: word
            - children:
              - text: member
                type: word
              - text: list
                type: word
              type: seq
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_toggle_members
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_members
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_toggle_members
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_members
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: toggle
          type: word
        - children:
          - children:
            - text: members
              type: word
            - children:
              - text: member
                type: word
              - text: list
                type: word
              type: seq
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_toggle_members
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_members
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_toggle_members
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_toggle_members
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: pick
          type: word
        - text: emoji
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_emoji_picker
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_emoji_picker
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_emoji_picker
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_emoji_picker
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: pick
          type: word
        - text: emoji
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_emoji_picker
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_emoji_picker
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_emoji_picker
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_emoji_picker
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: pick
          type: word
        - children:
          - children:
            - text: jif
              type: word
            - text: gif
              type: word
            - text: gift
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_gif_picker
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_gif_picker
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_gif_picker
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_gif_picker
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: pick
          type: word
        - children:
          - children:
            - text: jif
              type: word
            - text: gif
              type: word
            - text: gift
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_gif_picker
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_gif_picker
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_gif_picker
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_gif_picker
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - text: '# Misc'
    type: comment
  - children:
    - children:
      - children:
        - text: mark
          type: word
        - text: inbox
          type: word
        - text: channel
          type: word
        - text: read
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_mark_inbox_read
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mark_inbox_read
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_mark_inbox_read
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mark_inbox_read
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: mark
          type: word
        - text: inbox
          type: word
        - text: channel
          type: word
        - text: read
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_mark_inbox_read
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mark_inbox_read
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_mark_inbox_read
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mark_inbox_read
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - children:
          - text: toggle
            type: word
          type: optional
        - children:
          - children:
            - text: mute
              type: word
            - text: unmute
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_mute
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mute
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_mute
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mute
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - children:
          - text: toggle
            type: word
          type: optional
        - children:
          - children:
            - text: mute
              type: word
            - text: unmute
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_mute
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mute
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_mute
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_mute
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - children:
          - text: toggle
            type: word
          type: optional
        - children:
          - children:
            - text: deafen
              type: word
            - text: undeafen
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_deafen
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_deafen
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_deafen
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_deafen
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - children:
          - text: toggle
            type: word
          type: optional
        - children:
          - children:
            - text: deafen
              type: word
            - text: undeafen
              type: word
            type: choice
          type: parenthesized_rule
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_deafen
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_deafen
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_deafen
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_deafen
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: answer
          type: word
        - text: call
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_answer_call
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_answer_call
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_answer_call
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_answer_call
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: answer
          type: word
        - text: call
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_answer_call
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_answer_call
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_answer_call
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_answer_call
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: decline
          type: word
        - text: call
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - action_name:
            text: user.discord_decline_call
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_decline_call
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_decline_call
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_decline_call
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: decline
          type: word
        - text: call
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - action_name:
            text: user.discord_decline_call
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_decline_call
            type: identifier
          - children: []
            type: argument_list
          type: action
        expression:
          action_name:
            text: user.discord_decline_call
            type: identifier
          arguments:
            children: []
            type: argument_list
          children:
          - text: user.discord_decline_call
            type: identifier
          - children: []
            type: argument_list
          type: action
        type: expression
      type: block
    type: command
  type: source_file
