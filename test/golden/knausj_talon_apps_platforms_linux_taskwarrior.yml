input: |
  os: linux
  tag: terminal
  and tag: user.taskwarrior
  -
  # general
  task version: "task --version\n"
  task commands: "task commands\n"
  task help: "task help\n"

  # task list
  task list: "task list\n"
  task list orphans: "task project: list\n"
  task list untagged: "task tags.none: list\n"
  task list <user.text>: "task list {text}\n"
  task list project: "task list project: "
  task list project <user.text>: "task list project:{text}\n"

  # task add
  task add: "task add "
  task add <user.text>: "task add {text}\n"
  task undo: "task undo\n"

  (tasks|task next): "task next\n"

  # task editing
  task <number> edit$: "task {number} edit"

  # task completion
  task <number> done$: "task {number} done"
  task <number> delete$: "task {number} delete"
output:
  children:
  - children:
    - children:
      - children:
        - text: os
          type: identifier
        - text: ' linux'
          type: implicit_string
        key:
          text: os
          type: identifier
        pattern:
          text: ' linux'
          type: implicit_string
        type: match
      - children:
        - children:
          - text: tag
            type: identifier
          - text: ' terminal'
            type: implicit_string
          key:
            text: tag
            type: identifier
          pattern:
            text: ' terminal'
            type: implicit_string
          type: match
        - children:
          - text: tag
            type: identifier
          - text: ' user.taskwarrior'
            type: implicit_string
          key:
            text: tag
            type: identifier
          pattern:
            text: ' user.taskwarrior'
            type: implicit_string
          type: match
        type: and
      type: or
    type: context
  - text: '# general'
    type: comment
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: version
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: task --version
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task --version
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: version
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: task --version
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task --version
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: commands
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: task commands
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task commands
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: commands
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: task commands
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task commands
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: help
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: task help
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task help
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: help
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: task help
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task help
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - text: '# task list'
    type: comment
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: task list
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task list
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: task list
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task list
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - text: orphans
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: 'task project: list'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task project: list'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - text: orphans
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task project: list'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task project: list'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - text: untagged
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: 'task tags.none: list'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task tags.none: list'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - text: untagged
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task tags.none: list'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task tags.none: list'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: 'task list '
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task list '
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task list '
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task list '
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - text: project
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: 'task list project: '
            type: string_content
          type: string
        expression:
          children:
          - text: 'task list project: '
            type: string_content
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - text: project
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task list project: '
            type: string_content
          type: string
        expression:
          children:
          - text: 'task list project: '
            type: string_content
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - text: project
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: 'task list project:'
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task list project:'
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: list
          type: word
        - text: project
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task list project:'
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task list project:'
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - text: '# task add'
    type: comment
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: add
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: 'task add '
            type: string_content
          type: string
        expression:
          children:
          - text: 'task add '
            type: string_content
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: add
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task add '
            type: string_content
          type: string
        expression:
          children:
          - text: 'task add '
            type: string_content
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: add
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: 'task add '
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task add '
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: add
          type: word
        - capture_name:
            text: user.text
            type: identifier
          children:
          - text: user.text
            type: identifier
          type: capture
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task add '
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: 'task add '
            type: string_content
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - text: undo
          type: word
        type: seq
      type: rule
    - children:
      - children:
        - children:
          - text: task undo
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task undo
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - text: undo
          type: word
        type: seq
      type: rule
    script:
      children:
      - children:
        - children:
          - text: task undo
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task undo
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - children:
          - text: tasks
            type: word
          - children:
            - text: task
              type: word
            - text: next
              type: word
            type: seq
          type: choice
        type: parenthesized_rule
      type: rule
    - children:
      - children:
        - children:
          - text: task next
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task next
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - children:
          - text: tasks
            type: word
          - children:
            - text: task
              type: word
            - text: next
              type: word
            type: seq
          type: choice
        type: parenthesized_rule
      type: rule
    script:
      children:
      - children:
        - children:
          - text: task next
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        expression:
          children:
          - text: task next
            type: string_content
          - text: \n
            type: string_escape_sequence
          type: string
        type: expression
      type: block
    type: command
  - text: '# task editing'
    type: comment
  - children:
    - children:
      - children:
        - text: task
          type: word
        - capture_name:
            text: number
            type: identifier
          children:
          - text: number
            type: identifier
          type: capture
        - text: edit
          type: word
        type: seq
      - text: $
        type: end_anchor
      type: rule
    - children:
      - children:
        - children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' edit'
            type: string_content
          type: string
        expression:
          children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' edit'
            type: string_content
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - capture_name:
            text: number
            type: identifier
          children:
          - text: number
            type: identifier
          type: capture
        - text: edit
          type: word
        type: seq
      - text: $
        type: end_anchor
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' edit'
            type: string_content
          type: string
        expression:
          children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' edit'
            type: string_content
          type: string
        type: expression
      type: block
    type: command
  - text: '# task completion'
    type: comment
  - children:
    - children:
      - children:
        - text: task
          type: word
        - capture_name:
            text: number
            type: identifier
          children:
          - text: number
            type: identifier
          type: capture
        - text: done
          type: word
        type: seq
      - text: $
        type: end_anchor
      type: rule
    - children:
      - children:
        - children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' done'
            type: string_content
          type: string
        expression:
          children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' done'
            type: string_content
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - capture_name:
            text: number
            type: identifier
          children:
          - text: number
            type: identifier
          type: capture
        - text: done
          type: word
        type: seq
      - text: $
        type: end_anchor
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' done'
            type: string_content
          type: string
        expression:
          children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' done'
            type: string_content
          type: string
        type: expression
      type: block
    type: command
  - children:
    - children:
      - children:
        - text: task
          type: word
        - capture_name:
            text: number
            type: identifier
          children:
          - text: number
            type: identifier
          type: capture
        - text: delete
          type: word
        type: seq
      - text: $
        type: end_anchor
      type: rule
    - children:
      - children:
        - children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' delete'
            type: string_content
          type: string
        expression:
          children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' delete'
            type: string_content
          type: string
        type: expression
      type: block
    rule:
      children:
      - children:
        - text: task
          type: word
        - capture_name:
            text: number
            type: identifier
          children:
          - text: number
            type: identifier
          type: capture
        - text: delete
          type: word
        type: seq
      - text: $
        type: end_anchor
      type: rule
    script:
      children:
      - children:
        - children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' delete'
            type: string_content
          type: string
        expression:
          children:
          - text: 'task '
            type: string_content
          - text: '{'
            type: string_content
          - text: number
            type: string_content
          - text: '}'
            type: string_content
          - text: ' delete'
            type: string_content
          type: string
        type: expression
      type: block
    type: command
  type: source_file
