input: |
  os: linux
  # XXX - this matches .gdb files atm
  #win.title: /gdb/
  tag: terminal
  mode: user.gdb
  -
  tag(): user.gdb
  tag(): user.debugger
  until <number>: "until {number}"
  force clear all break points:
      insert("d br\n")
      insert("y\n")
  break [on] clipboard:
      insert("break ")
      key(ctrl-shift-v)
      key(enter)

  # information
  list [source]: "list\n"
  info source: "info source\n"

  print: "p "
  print [variable] <user.text>: "p {text}"
  print hex: "p/x "
  print hex [variable] <user.text>: "p/x {text}"
  print string: "p/s "

  # hexdumping
  # XXX - switch the sizes to a list in python?
  # XXX - should cache the last used size
  hex dump <number> bytes: "x/{number}bx "
  hex dump <number> (half|short) words: "x/{number}hx "
  hex dump <number> (d|long) words: "x/{number}dx "
  hex dump <number> quad words: "x/{number}gx "
  # this is some arbitrary default for convenience
  hex dump: "x/100gx "
  hex dump highlighted:
      insert("x/100gx ")
      edit.copy()
      edit.paste()
      key(enter)
  hex dump clipboard:
      insert("x/100gx ")
      edit.paste()
      key(enter)


  # execution
  source: "source \t\t"

  # displays
  # XXX - move thee invoke command into a python script
  (list|show|info) display: "info display\n"
  display assembly line$: "display /i $pc\n"
  display source: "display "
  enable display <number_small>: "enable display {number_small}\n"
  disable display <number_small>: "disable display {number_small}\n"
  undisplay: "undisplay\n"

  # variables
  (list|show|info) local: "info local "
  (list|show|info) local typed: "info local -t "
  (list|show|info) variable: "info variable "
  (list|show|info) variable typed: "info variable -t "
  (list|show|info) locals: "info local\n"
  (list|show|info) variables: "info variables\n"

  # threads
  info threads: "info threads\n"

  restart [program]: "r\n"
  continue: "c\n"
  back trace: "bt\n"
  debug quit: "quit\n"
  # more quickly quit when there are inferiors
  debug force quit: "quit\ny\n"
  (show|info) (inf|inferiors): "info inferiors\n"
  inferior <number_small>$: "inferior {number_small}\n"
  inferior: "inferior "
  resume main (inf|inferior):
      insert("inferior 1\n")
      insert("c\n")
  resume [from] (inf|inferior) <number_small>$:
      insert("inferior {number_small}\n")
      insert("c\n")

  # arguments
  set args: "set args "

  # settings
  show follow (fork|forks) [mode]: "show follow-fork-mode\n"
  [set] follow (fork|forks) [mode] child: "set follow-fork-mode child\n"
  [set] follow (fork|forks) [mode] parent: "set follow-fork-mode parent\n"

  show detach on fork: "show detach-on-fork\n"
  set detach on fork: "set detach-on-fork on\n"
  unset detach on fork: "set detach-on-fork off\n"

  # list
  show list size: "show listsize\n"
  set list size <number_small>: "set listsize {number_small}\n"

  # misc
  clear screen: "shell clear\n"
output:
  type: source_file
  children:
  - type: matches
    children:
    - type: match
      children: []
      left:
        text: os
        type: identifier
      modifiers: []
      right:
        text: ' linux'
        type: implicit_string
    - text: '# XXX - this matches .gdb files atm'
      type: comment
    - text: '#win.title: /gdb/'
      type: comment
    - type: match
      children: []
      left:
        text: tag
        type: identifier
      modifiers: []
      right:
        text: ' terminal'
        type: implicit_string
    - type: match
      children: []
      left:
        text: mode
        type: identifier
      modifiers: []
      right:
        text: ' user.gdb'
        type: implicit_string
  - type: declarations
    children:
    - type: tag_import_declaration
      children: []
      right:
        text: user.gdb
        type: identifier
    - type: tag_import_declaration
      children: []
      right:
        text: user.debugger
        type: identifier
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: until
            type: word
          - type: capture
            children: []
            capture_name:
              text: number
              type: identifier
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'until '
              type: string_content
            - text: '{'
              type: string_content
            - text: number
              type: string_content
            - text: '}'
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: force
            type: word
          - text: clear
            type: word
          - text: all
            type: word
          - text: break
            type: word
          - text: points
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: string
                children:
                - text: d br
                  type: string_content
                - text: \n
                  type: string_escape_sequence
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: string
                children:
                - text: y
                  type: string_content
                - text: \n
                  type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: break
            type: word
          - type: optional
            children:
            - text: on
              type: word
          - text: clipboard
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: string
                children:
                - text: 'break '
                  type: string_content
        - type: expression_statement
          children: []
          expression:
            type: key_action
            children: []
            arguments:
              text: ctrl-shift-v
              type: implicit_string
        - type: expression_statement
          children: []
          expression:
            type: key_action
            children: []
            arguments:
              text: enter
              type: implicit_string
    - text: '# information'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: list
            type: word
          - type: optional
            children:
            - text: source
              type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: list
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: info
            type: word
          - text: source
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: info source
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - text: print
          type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'p '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: print
            type: word
          - type: optional
            children:
            - text: variable
              type: word
          - type: capture
            children: []
            capture_name:
              text: user.text
              type: identifier
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'p '
              type: string_content
            - text: '{'
              type: string_content
            - text: text
              type: string_content
            - text: '}'
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: print
            type: word
          - text: hex
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'p/x '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: print
            type: word
          - text: hex
            type: word
          - type: optional
            children:
            - text: variable
              type: word
          - type: capture
            children: []
            capture_name:
              text: user.text
              type: identifier
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'p/x '
              type: string_content
            - text: '{'
              type: string_content
            - text: text
              type: string_content
            - text: '}'
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: print
            type: word
          - text: string
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'p/s '
              type: string_content
    - text: '# hexdumping'
      type: comment
    - text: '# XXX - switch the sizes to a list in python?'
      type: comment
    - text: '# XXX - should cache the last used size'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: hex
            type: word
          - text: dump
            type: word
          - type: capture
            children: []
            capture_name:
              text: number
              type: identifier
          - text: bytes
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: x/
              type: string_content
            - text: '{'
              type: string_content
            - text: number
              type: string_content
            - text: '}'
              type: string_content
            - text: 'bx '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: hex
            type: word
          - text: dump
            type: word
          - type: capture
            children: []
            capture_name:
              text: number
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: half
                type: word
              - text: short
                type: word
          - text: words
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: x/
              type: string_content
            - text: '{'
              type: string_content
            - text: number
              type: string_content
            - text: '}'
              type: string_content
            - text: 'hx '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: hex
            type: word
          - text: dump
            type: word
          - type: capture
            children: []
            capture_name:
              text: number
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: d
                type: word
              - text: long
                type: word
          - text: words
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: x/
              type: string_content
            - text: '{'
              type: string_content
            - text: number
              type: string_content
            - text: '}'
              type: string_content
            - text: 'dx '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: hex
            type: word
          - text: dump
            type: word
          - type: capture
            children: []
            capture_name:
              text: number
              type: identifier
          - text: quad
            type: word
          - text: words
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: x/
              type: string_content
            - text: '{'
              type: string_content
            - text: number
              type: string_content
            - text: '}'
              type: string_content
            - text: 'gx '
              type: string_content
    - text: '# this is some arbitrary default for convenience'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: hex
            type: word
          - text: dump
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'x/100gx '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: hex
            type: word
          - text: dump
            type: word
          - text: highlighted
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: string
                children:
                - text: 'x/100gx '
                  type: string_content
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.copy
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.paste
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: key_action
            children: []
            arguments:
              text: enter
              type: implicit_string
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: hex
            type: word
          - text: dump
            type: word
          - text: clipboard
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: string
                children:
                - text: 'x/100gx '
                  type: string_content
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.paste
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: key_action
            children: []
            arguments:
              text: enter
              type: implicit_string
    - text: '# execution'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - text: source
          type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'source '
              type: string_content
            - text: \t
              type: string_escape_sequence
            - text: \t
              type: string_escape_sequence
    - text: '# displays'
      type: comment
    - text: '# XXX - move thee invoke command into a python script'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: list
                type: word
              - text: show
                type: word
              - text: info
                type: word
          - text: display
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: info display
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: display
            type: word
          - text: assembly
            type: word
          - text: line
            type: word
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: display /i $pc
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: display
            type: word
          - text: source
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'display '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: enable
            type: word
          - text: display
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'enable display '
              type: string_content
            - text: '{'
              type: string_content
            - text: number_small
              type: string_content
            - text: '}'
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: disable
            type: word
          - text: display
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'disable display '
              type: string_content
            - text: '{'
              type: string_content
            - text: number_small
              type: string_content
            - text: '}'
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - text: undisplay
          type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: undisplay
              type: string_content
            - text: \n
              type: string_escape_sequence
    - text: '# variables'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: list
                type: word
              - text: show
                type: word
              - text: info
                type: word
          - text: local
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'info local '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: list
                type: word
              - text: show
                type: word
              - text: info
                type: word
          - text: local
            type: word
          - text: typed
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'info local -t '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: list
                type: word
              - text: show
                type: word
              - text: info
                type: word
          - text: variable
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'info variable '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: list
                type: word
              - text: show
                type: word
              - text: info
                type: word
          - text: variable
            type: word
          - text: typed
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'info variable -t '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: list
                type: word
              - text: show
                type: word
              - text: info
                type: word
          - text: locals
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: info local
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: list
                type: word
              - text: show
                type: word
              - text: info
                type: word
          - text: variables
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: info variables
              type: string_content
            - text: \n
              type: string_escape_sequence
    - text: '# threads'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: info
            type: word
          - text: threads
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: info threads
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: restart
            type: word
          - type: optional
            children:
            - text: program
              type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: r
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - text: continue
          type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: c
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: back
            type: word
          - text: trace
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: bt
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: debug
            type: word
          - text: quit
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: quit
              type: string_content
            - text: \n
              type: string_escape_sequence
    - text: '# more quickly quit when there are inferiors'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: debug
            type: word
          - text: force
            type: word
          - text: quit
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: quit
              type: string_content
            - text: \n
              type: string_escape_sequence
            - text: y
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: show
                type: word
              - text: info
                type: word
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: inf
                type: word
              - text: inferiors
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: info inferiors
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: inferior
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'inferior '
              type: string_content
            - text: '{'
              type: string_content
            - text: number_small
              type: string_content
            - text: '}'
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - text: inferior
          type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'inferior '
              type: string_content
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: resume
            type: word
          - text: main
            type: word
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: inf
                type: word
              - text: inferior
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: string
                children:
                - text: inferior 1
                  type: string_content
                - text: \n
                  type: string_escape_sequence
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: string
                children:
                - text: c
                  type: string_content
                - text: \n
                  type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: resume
            type: word
          - type: optional
            children:
            - text: from
              type: word
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: inf
                type: word
              - text: inferior
                type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: string
                children:
                - text: 'inferior '
                  type: string_content
                - text: '{'
                  type: string_content
                - text: number_small
                  type: string_content
                - text: '}'
                  type: string_content
                - text: \n
                  type: string_escape_sequence
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: string
                children:
                - text: c
                  type: string_content
                - text: \n
                  type: string_escape_sequence
    - text: '# arguments'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: set
            type: word
          - text: args
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'set args '
              type: string_content
    - text: '# settings'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: show
            type: word
          - text: follow
            type: word
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: fork
                type: word
              - text: forks
                type: word
          - type: optional
            children:
            - text: mode
              type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: show follow-fork-mode
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: optional
            children:
            - text: set
              type: word
          - text: follow
            type: word
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: fork
                type: word
              - text: forks
                type: word
          - type: optional
            children:
            - text: mode
              type: word
          - text: child
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: set follow-fork-mode child
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - type: optional
            children:
            - text: set
              type: word
          - text: follow
            type: word
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: fork
                type: word
              - text: forks
                type: word
          - type: optional
            children:
            - text: mode
              type: word
          - text: parent
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: set follow-fork-mode parent
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: show
            type: word
          - text: detach
            type: word
          - text: on
            type: word
          - text: fork
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: show detach-on-fork
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: set
            type: word
          - text: detach
            type: word
          - text: on
            type: word
          - text: fork
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: set detach-on-fork on
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: unset
            type: word
          - text: detach
            type: word
          - text: on
            type: word
          - text: fork
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: set detach-on-fork off
              type: string_content
            - text: \n
              type: string_escape_sequence
    - text: '# list'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: show
            type: word
          - text: list
            type: word
          - text: size
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: show listsize
              type: string_content
            - text: \n
              type: string_escape_sequence
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: set
            type: word
          - text: list
            type: word
          - text: size
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: 'set listsize '
              type: string_content
            - text: '{'
              type: string_content
            - text: number_small
              type: string_content
            - text: '}'
              type: string_content
            - text: \n
              type: string_escape_sequence
    - text: '# misc'
      type: comment
    - type: command_declaration
      children:
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: clear
            type: word
          - text: screen
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: string
            children:
            - text: shell clear
              type: string_content
            - text: \n
              type: string_escape_sequence
