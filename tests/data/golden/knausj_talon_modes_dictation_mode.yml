input: |
  mode: dictation
  -
  ^press <user.modifiers>$: key(modifiers)
  ^press <user.keys>$: key(keys)

  # Everything here should call `auto_insert()` (instead of `insert()`), to preserve the state to correctly auto-capitalize/auto-space.
  # (Talonscript string literals implicitly call `auto_insert`, so there's no need to wrap those)
  <user.raw_prose>: auto_insert(raw_prose)
  cap: user.dictation_format_cap()
  # Hyphenated variants are for Dragon.
  (no cap | no-caps): user.dictation_format_no_cap()
  (no space | no-space): user.dictation_format_no_space()
  ^cap that$: user.dictation_reformat_cap()
  ^(no cap | no-caps) that$: user.dictation_reformat_no_cap()
  ^(no space | no-space) that$: user.dictation_reformat_no_space()

  # Navigation
  go up <number_small> (line|lines):
      edit.up()
      repeat(number_small - 1)
  go down <number_small> (line|lines):
      edit.down()
      repeat(number_small - 1)
  go left <number_small> (word|words):
      edit.word_left()
      repeat(number_small - 1)
  go right <number_small> (word|words):
      edit.word_right()
      repeat(number_small - 1)
  go line start: edit.line_start()
  go line end: edit.line_end()

  # Selection
  select left <number_small> (word|words):
      edit.extend_word_left()
      repeat(number_small - 1)
  select right <number_small> (word|words):
      edit.extend_word_right()
      repeat(number_small - 1)
  select left <number_small> (character|characters):
      edit.extend_left()
      repeat(number_small - 1)
  select right <number_small> (character|characters):
      edit.extend_right()
      repeat(number_small - 1)
  clear left <number_small> (word|words):
      edit.extend_word_left()
      repeat(number_small - 1)
      edit.delete()
  clear right <number_small> (word|words):
      edit.extend_word_right()
      repeat(number_small - 1)
      edit.delete()
  clear left <number_small> (character|characters):
      edit.extend_left()
      repeat(number_small - 1)
      edit.delete()
  clear right <number_small> (character|characters):
      edit.extend_right()
      repeat(number_small - 1)
      edit.delete()

  # Formatting
  formatted <user.format_text>:
      user.dictation_insert_raw(format_text)
  ^format selection <user.formatters>$:
      user.formatters_reformat_selection(formatters)

  # Corrections
  scratch that: user.clear_last_phrase()
  scratch selection: edit.delete()
  select that: user.select_last_phrase()
  spell that <user.letters>: auto_insert(letters)
  spell that <user.formatters> <user.letters>:
      result = user.formatted_text(letters, formatters)
      user.dictation_insert_raw(result)

  # Escape, type things that would otherwise be commands
  ^escape <user.text>$:
      auto_insert(user.text)
output:
  type: source_file
  children:
  - type: matches
    children:
    - type: match
      children: []
      left:
        text: mode
        type: identifier
      modifiers: []
      right:
        text: ' dictation'
        type: implicit_string
  - type: declarations
    children:
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - text: ^
          type: start_anchor
        - type: seq
          children:
          - text: press
            type: word
          - type: capture
            children: []
            capture_name:
              text: user.modifiers
              type: identifier
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: key_action
            children: []
            arguments:
              text: modifiers
              type: implicit_string
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - text: ^
          type: start_anchor
        - type: seq
          children:
          - text: press
            type: word
          - type: capture
            children: []
            capture_name:
              text: user.keys
              type: identifier
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: key_action
            children: []
            arguments:
              text: keys
              type: implicit_string
    - text: '# Everything here should call `auto_insert()` (instead of `insert()`),
        to preserve the state to correctly auto-capitalize/auto-space.'
      type: comment
    - text: "# (Talonscript string literals implicitly call `auto_insert`, so there's\
        \ no need to wrap those)"
      type: comment
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: capture
          children: []
          capture_name:
            text: user.raw_prose
            type: identifier
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: auto_insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: variable
                children: []
                variable_name:
                  text: raw_prose
                  type: identifier
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - text: cap
          type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.dictation_format_cap
              type: identifier
            arguments:
              type: argument_list
              children: []
    - text: '# Hyphenated variants are for Dragon.'
      type: comment
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - type: seq
              children:
              - text: no
                type: word
              - text: cap
                type: word
            - text: no-caps
              type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.dictation_format_no_cap
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - type: seq
              children:
              - text: no
                type: word
              - text: space
                type: word
            - text: no-space
              type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.dictation_format_no_space
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - text: ^
          type: start_anchor
        - type: seq
          children:
          - text: cap
            type: word
          - text: that
            type: word
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.dictation_reformat_cap
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - text: ^
          type: start_anchor
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - type: seq
                children:
                - text: no
                  type: word
                - text: cap
                  type: word
              - text: no-caps
                type: word
          - text: that
            type: word
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.dictation_reformat_no_cap
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - text: ^
          type: start_anchor
        - type: seq
          children:
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - type: seq
                children:
                - text: no
                  type: word
                - text: space
                  type: word
              - text: no-space
                type: word
          - text: that
            type: word
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.dictation_reformat_no_space
              type: identifier
            arguments:
              type: argument_list
              children: []
    - text: '# Navigation'
      type: comment
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: go
            type: word
          - text: up
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: line
                type: word
              - text: lines
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.up
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: go
            type: word
          - text: down
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: line
                type: word
              - text: lines
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.down
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: go
            type: word
          - text: left
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: word
                type: word
              - text: words
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.word_left
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: go
            type: word
          - text: right
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: word
                type: word
              - text: words
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.word_right
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: go
            type: word
          - text: line
            type: word
          - text: start
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.line_start
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: go
            type: word
          - text: line
            type: word
          - text: end
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.line_end
              type: identifier
            arguments:
              type: argument_list
              children: []
    - text: '# Selection'
      type: comment
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: select
            type: word
          - text: left
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: word
                type: word
              - text: words
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.extend_word_left
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: select
            type: word
          - text: right
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: word
                type: word
              - text: words
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.extend_word_right
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: select
            type: word
          - text: left
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: character
                type: word
              - text: characters
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.extend_left
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: select
            type: word
          - text: right
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: character
                type: word
              - text: characters
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.extend_right
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: clear
            type: word
          - text: left
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: word
                type: word
              - text: words
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.extend_word_left
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.delete
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: clear
            type: word
          - text: right
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: word
                type: word
              - text: words
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.extend_word_right
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.delete
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: clear
            type: word
          - text: left
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: character
                type: word
              - text: characters
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.extend_left
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.delete
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: clear
            type: word
          - text: right
            type: word
          - type: capture
            children: []
            capture_name:
              text: number_small
              type: identifier
          - type: parenthesized_rule
            children:
            - type: choice
              children:
              - text: character
                type: word
              - text: characters
                type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.extend_right
              type: identifier
            arguments:
              type: argument_list
              children: []
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: repeat
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: binary_operator
                children: []
                left:
                  type: variable
                  children: []
                  variable_name:
                    text: number_small
                    type: identifier
                operator:
                  text: '-'
                  type: operator
                right:
                  text: '1'
                  type: integer
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.delete
              type: identifier
            arguments:
              type: argument_list
              children: []
    - text: '# Formatting'
      type: comment
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: formatted
            type: word
          - type: capture
            children: []
            capture_name:
              text: user.format_text
              type: identifier
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.dictation_insert_raw
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: variable
                children: []
                variable_name:
                  text: format_text
                  type: identifier
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - text: ^
          type: start_anchor
        - type: seq
          children:
          - text: format
            type: word
          - text: selection
            type: word
          - type: capture
            children: []
            capture_name:
              text: user.formatters
              type: identifier
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.formatters_reformat_selection
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: variable
                children: []
                variable_name:
                  text: formatters
                  type: identifier
    - text: '# Corrections'
      type: comment
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: scratch
            type: word
          - text: that
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.clear_last_phrase
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: scratch
            type: word
          - text: selection
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: edit.delete
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: select
            type: word
          - text: that
            type: word
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.select_last_phrase
              type: identifier
            arguments:
              type: argument_list
              children: []
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: spell
            type: word
          - text: that
            type: word
          - type: capture
            children: []
            capture_name:
              text: user.letters
              type: identifier
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: auto_insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: variable
                children: []
                variable_name:
                  text: letters
                  type: identifier
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - type: seq
          children:
          - text: spell
            type: word
          - text: that
            type: word
          - type: capture
            children: []
            capture_name:
              text: user.formatters
              type: identifier
          - type: capture
            children: []
            capture_name:
              text: user.letters
              type: identifier
      right:
        type: block
        children:
        - type: assignment_statement
          children: []
          left:
            text: result
            type: identifier
          right:
            type: action
            children: []
            action_name:
              text: user.formatted_text
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: variable
                children: []
                variable_name:
                  text: letters
                  type: identifier
              - type: variable
                children: []
                variable_name:
                  text: formatters
                  type: identifier
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: user.dictation_insert_raw
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: variable
                children: []
                variable_name:
                  text: result
                  type: identifier
    - text: '# Escape, type things that would otherwise be commands'
      type: comment
    - type: command_declaration
      children: []
      left:
        type: rule
        children:
        - text: ^
          type: start_anchor
        - type: seq
          children:
          - text: escape
            type: word
          - type: capture
            children: []
            capture_name:
              text: user.text
              type: identifier
        - text: $
          type: end_anchor
      right:
        type: block
        children:
        - type: expression_statement
          children: []
          expression:
            type: action
            children: []
            action_name:
              text: auto_insert
              type: identifier
            arguments:
              type: argument_list
              children:
              - type: variable
                children: []
                variable_name:
                  text: user.text
                  type: identifier
